```mermaid
flowchart LR
  %% Simplified High Command View (parse-stable)
  %% solid = primary, dashed = control/federation

  BLOCK[ThunderBlock A] -- event/state --> FLOW[ThunderFlow]
  BLOCK2[ThunderBlock B]
  BLOCK3[ThunderBlock C]
  GATE[ThunderGate] -- authN/Z/events --> FLOW
  LINK[ThunderLink] -- voice+msg --> FLOW
  GRID[ThunderGrid] -- zone events --> FLOW
  BOLT[ThunderBolt] -- orchestration --> FLOW
  CROWN[ThunderCrown] -- ai/intent --> FLOW
  FLOW -- feedback --> BLOCK
  FLOW -- updates --> LINK
  FLOW -- placement --> GRID
  FLOW -- tasks/compute --> BOLT
  FLOW -- ai/context --> CROWN
  BLOCK -- infra config --- GATE
  GATE -- federate & auth --- LINK
  LINK -- placement --- GRID
  GRID -- jobs/ops --- BOLT
  BOLT -- intent + plans --- CROWN
  CROWN -- policy --- BLOCK

  %% Federation ring
  BLOCK -. replicate .-> BLOCK2
  BLOCK2 -. replicate .-> BLOCK3
  BLOCK3 -. knowledge sync .-> BLOCK
  BLOCK -. auth handshake .-> GATE
  BLOCK2 -. auth handshake .-> GATE
  BLOCK3 -. auth handshake .-> GATE

  %% Resources
  BLOCK --> blkVault[(Thundervault)]
  BLOCK --> vine[Thundervine]
  BLOCK2 --> blkVault
  BLOCK3 --> blkVault
  BLOCK2 --> vine
  BLOCK3 --> vine
  GATE --> gatePolicy[Policy / Rate Limit]
  gatePolicy --> gateBridge[ThunderBridge]
  LINK --> lnkChan[Communities] & voiceChan[VoiceChannel]
  voiceChan --> voiceSup[VoiceSupervisor]
  voiceSup --> voiceRoomRes[VoiceRoom]
  voiceRoomRes --> voicePartRes[VoiceParticipant] & voiceDevRes[VoiceDevice]
  FLOW --> flowBus[EventBus]
  flowBus --> pubsub[PubSub]
  pubsub --> netMesh[NetMesh]
  netMesh --> obsTap[Telemetry Tap]
  BLOCK2 -. federated event .-> flowBus
  BLOCK3 -. federated event .-> flowBus
  BOLT --> boltPlan[Plan]
  boltPlan --> boltLane[Lane Engine]
  boltLane --> boltCell[ThunderCell] & boltJobs[Jobs]
  boltCell -- snapshots --> blkVault
  CROWN --> ashAI[AshAI]
  ashAI --> jidoActs[Jido Actions]
  jidoActs --> crnAI[AI Orchestrator]
  crnAI -- request model/tool --> gatePolicy
  gateBridge -- egress --> extAPI[External APIs]
  gateBridge --> protoLayer[Protocol Layer]
  protoLayer --> protoIngress[Proto Ingest]
  protoLayer --> protoEgress[Proto Egress]
  protoLayer -. negotiation .-> COM
  COM[ThunderCom] --> fedBus[Federation Bus]
  fedBus --> netMesh
  fedBus -. policy route .-> gatePolicy
  COM --> flowBus
  GATE --> COM
  BLOCK --> COM
  BLOCK2 --> COM
  BLOCK3 --> COM
  COM --> LINK
  GRID --> grZones[Zones]
  voiceChan -- voice.signal.* --> flowBus
  voiceSup -- voice.room.* --> flowBus
  flowBus -- telemetry --> blkVault
  gateBridge --> turn[TURN/STUN]
  turn --> webrtc[WebRTC]
  webrtc --> LINK
  flowBus -->|cmd.workflow.plan| vine
  boltPlan -->|consume DAG| vine
  vine -->|persist DAG| blkVault
  vine -->|dag.commit| FLOW
  vine -->|lineage| CROWN
  vine --> lineageStream[Lineage Export]
  lineageStream --> obsSink[Observability Sink]
  obsTap --> obsSink
  flowBus --> oTelExp[OTel Exporter]
  oTelExp --> obsSink

  %% Legend Planes
  subgraph PLANES
    CP[Control Plane]
    DP[Data Plane]
    FP[Federation Plane]
  end
  CP -. maps to .-> gatePolicy
  DP -. carried by .-> flowBus
  FP -. realized via .-> fedBus
```