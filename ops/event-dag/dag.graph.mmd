flowchart TB
  subgraph Sources
    HTTP[HTTP] --> Ingress
    WS[WebSocket] --> Ingress
    Timers[Timers] --> Ingress
    DBTrig[DB Triggers] --> Ingress
  end

  subgraph Processors
    Ingress --> Normalizer[Event Normalizer]
    Normalizer --> Partitioner
    Partitioner -->|by tenant_id| ProcA[Processor A]
    Partitioner -->|by community_id| ProcB[Processor B]
    ProcA --> Sink1
    ProcB --> Sink2
  end

  subgraph Sinks
    Sink1[(Postgres)]
    Sink2[(Vector Store)]
    Sink3[(MCP Bridge)]
    ProcA --> Sink3
  end

  classDef source fill:#0af,stroke:#036
  classDef processor fill:#fea,stroke:#a80
  classDef sink fill:#afa,stroke:#0a0
